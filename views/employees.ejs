<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Employee Database | Nexus Admin</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo">⚡ NEXUS ADMIN</div>
        <a href="/" class="nav-link">Dashboard Home</a>
    </nav>

    <div class="container">
        <div class="page-title-row">
            <h2>Employee Database</h2>
            <a href="/" class="back-dashboard-btn">← Back to Dashboard</a>
        </div>

        <div class="add-record-card">
            <h3 style="margin-top:0; font-size:18px;">Add New Record</h3>
            <form action="/add" method="POST">
                <div style="display: flex; gap: 15px; align-items: flex-end; flex-wrap: wrap;">
                    <div style="flex: 0.5;">
                        <label class="form-label">ID</label>
                        <input type="number" name="emp_id" class="modern-input" required>
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">NAME</label>
                        <input type="text" name="full_name" class="modern-input" required>
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">PHONE</label>
                        <input type="text" name="phone" class="modern-input">
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">SALARY</label>
                        <input type="number" name="salary" class="modern-input">
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">ROLE</label>
                        <select name="role_id" class="modern-input" required>
                            <option value="" disabled selected>Select...</option>
                            <% roles.forEach(role => { %>
                                <option value="<%= role.role_id %>"><%= role.role_name %></option>
                            <% }) %>
                        </select>
                    </div>
                    <button type="submit" class="add-btn">Add Record</button>
                </div>
            </form>
        </div>

        <table class="employee-table">
            <thead>
                <tr>
                    <th>ID</th><th>Name</th><th>Phone</th><th>Salary</th><th>Role</th><th style="text-align: right;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% employees.forEach(emp => { %>
                <tr class="employee-row">
                    <td>#<%= emp.employee_id %></td>
                    <td style="font-weight:700;"><%= emp.name %></td>
                    <td><%= emp.phone || 'None' %></td>
                    <td>$<%= emp.salary ? Number(emp.salary).toLocaleString() : '0.00' %></td>
                    <td>
                        <span class="badge badge-<%= emp.role_name ? emp.role_name.toLowerCase() : 'default' %>">
                            <%= emp.role_name %>
                        </span>
                    </td>
                    <td style="text-align: right; padding-right: 25px;">
                        <a href="/edit/<%= emp.employee_id %>" class="edit-action">EDIT</a>
                        <a href="/delete/<%= emp.employee_id %>" class="delete-action" 
                           onclick="return confirm('Delete this record?')">DELETE</a>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</body>
</html>